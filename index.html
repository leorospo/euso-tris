<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Tic Tac Toe</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="Leonardo">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="assets/js/script.js"></script>
  <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0 auto;
        }

        html, body, .center {
            height: 100%;
        }

        .center {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
        }

        table {
            background-color: antiquewhite;
        }

        td {
            height: 200px;
            width: 200px;
            border: 1px solid rgb(150, 150, 150);
        }
      
        .occupied {
            width: 150px;
            height: 150px;

            margin: 23px auto;

            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;

        }

        .cross {
            background-image: url("assets/cross.png");
        }

        .circle {
            background-image: url("assets/circle.png");
        }
  
  </style>

</head>



<body>
        <div class="center">
                <table>
                    <tr>
                        <td id="1" data-x="0" data-y="0" onclick="trisClick(this)"></td>
                        <td id="2" data-x="0" data-y="1" onclick="trisClick(this)"></td>
                        <td id="3" data-x="0" data-y="2" onclick="trisClick(this)"></td>
                    </tr>
        
                    <tr>
                        <td id="4" data-x="1" data-y="0" onclick="trisClick(this)"></td>
                        <td id="5" data-x="1" data-y="1" onclick="trisClick(this)"></td>
                        <td id="6" data-x="1" data-y="2" onclick="trisClick(this)"></td>
                    </tr>
        
                    <tr>
                        <td id="7" data-x="2" data-y="0" onclick="trisClick(this)"></td>
                        <td id="8" data-x="2" data-y="1" onclick="trisClick(this)"></td>
                        <td id="9" data-x="2" data-y="2" onclick="trisClick(this)"></td>
                    </tr>
        
                </table>

                <button style="margin-top: 60px" onclick="resetGame()">Play again</button>
            </div>

    <script>

        var boardStatus = [
            [undefined,undefined,undefined],
            [undefined,undefined,undefined],
            [undefined,undefined,undefined]
        ]

        var turn = 'cross'

        function trisClick(el) {
            var clickedX = el.dataset.x
            var clickedY = el.dataset.y

            if (isValidStep(boardStatus, turn , clickedX, clickedY)) {
                boardStatus[clickedX][clickedY] = turn
                setValues(boardStatus)
                changeTurn()

            }
                
            //if
           // getWinner()
                //showWinner()
            

        }

        function isValidStep(matrix, turn, x, y) {
            return matrix[x][y] == undefined ? true : false
        }

        function setValues(matrix) {
            for (let x in matrix) {
                for(let y in matrix[x]) {
                    let id = xyToId(x, y)
                    if(undefined !== matrix[x][y]) {
                        document.getElementById(id).innerHTML = "<div class=\"occupied " + matrix[x][y] + "\">"
                    }
                }
            }
        }

        function xyToId(x, y) {
            let xy = "" + x + y
            switch (xy) {
                case '00':
                    return 1
                    break;
                case '01':
                    return 2
                    break;
                case '02':
                    return 3
                    break;
                case '10':
                    return 4
                    break;
                case '11':
                    return 5
                    break;
                case '12':
                    return 6
                    break;
                case '20':
                    return 7
                    break;
                case '21':
                    return 8
                    break;
                case '22':
                    return 9
                    break;
            }
        }

        function changeTurn() {
           turn = turn == 'cross' ? 'circle' : 'cross'
        }

        function resetGame() {

        }














/*

        let td_arr = document.getElementsByTagName("td")
        let turn
        let slots = {
            uno: undefined,
            due: undefined,
            tre: undefined,
            quattro: undefined,
            cinque: undefined,
            sei: undefined,
            sette: undefined,
            otto: undefined,
            nove: undefined

        }

        for (var property in td_arr) {

            //Only use td with an #id
            let id = td_arr[property].id
            let element = document.getElementById(id)
            if (id !== undefined){
                element.addEventListener("click", function() {click_event(element)})
            }

        }

        function click_event(element) {
            id = element.id
            obj_prop = id_to_obj(id)

            if (slots[obj_prop] === undefined) {
                occupy(id, obj_prop)
                save_move(id)
                check_winner()          

            }
  
        }

        function occupy(id, obj_prop) {

            if (turn == 'cross' ) turn = 'circle'
            else turn = 'cross'

            document.getElementById(id).innerHTML = "<div class=\"occupied " + turn + "\">"

        }

        function check_winner() {
            if ( slots.uno != undefined && ((slots.uno==slots.due && slots.uno==slots.tre) || (slots.uno==slots.quattro && slots.uno==slots.sette)) ){ alert('Ha vinto '+ slots.uno)}
            if ( slots.nove != undefined && ((slots.nove==slots.sei && slots.nove==slots.tre) || (slots.nove==slots.otto && slots.nove==slots.sette)) ){ alert('Ha vinto '+ slots.nove)}
            if ( slots.cinque != undefined && ((slots.cinque==slots.uno && slots.cinque==slots.nove) || (slots.cinque==slots.tre && slots.cinque==slots.sette) ||(slots.cinque==slots.due && slots.cinque==slots.otto) || (slots.cinque==slots.quattro && slots.cinque==slots.sei) ) ){ alert('Ha vinto '+ slots.cinque)}
        }

        function id_to_obj(id) {
            switch(id) {
                case '1':
                    return "uno"
                break;
                case '2':
                    return "due"
                break;
                case '3':
                    return "tre"
                break;
                case '4':
                    return "quattro"
                break;
                case '5':
                    return "cinque"
                break;
                case '6':
                    return "sei"
                break;
                case '7':
                    return "sette"
                break;
                case '8':
                    return "otto"
                break;
                case '9':
                    return "nove"
                break;
            }

        }

        function save_move(id) {

            switch(id) {
                case '1':
                    slots.uno = turn
                break;
                case '2':
                    slots.due = turn
                break;
                case '3':
                    slots.tre = turn
                break;
                case '4':
                    slots.quattro = turn
                break;
                case '5':
                    slots.cinque = turn
                break;
                case '6':
                    slots.sei = turn
                break;
                case '7':
                    slots.sette = turn
                break;
                case '8':
                    slots.otto = turn
                break;
                case '9':
                    slots.nove = turn
                break;
            }
        }
*/


    </script>
    
</body>
</html>



